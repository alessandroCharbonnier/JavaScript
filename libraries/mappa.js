!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Mappa=e():t.Mappa=e()}(this,function(){return function(t){function e(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var o={};return e.m=t,e.c=o,e.i=function(t){return t},e.d=function(t,o,n){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=6)}([function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),r=o(3),a=function(t){return t&&t.__esModule?t:{default:t}}(r),s=function(){function t(e){n(this,t),this.options=e,this.init()}return i(t,[{key:"init",value:function(){this.options.pixels=256,this.options.scale||(this.options.scale=1),2===this.options.scale&&(this.options.pixels=512)}},{key:"latLngToPixel",value:function(t,e){return{x:this.fromLngToPoint(e)-this.fromLngToPoint(this.options.lng)+this.options.width/(2/this.options.scale),y:this.fromLatToPoint(t)-this.fromLatToPoint(this.options.lat)+this.options.height/(2/this.options.scale)}}},{key:"fromLatToPoint",value:function(t){return this.options.pixels/Math.PI*Math.pow(2,this.options.zoom)*(Math.PI-Math.log(Math.tan(Math.PI/4+t*Math.PI/180/2)))}},{key:"fromLngToPoint",value:function(t){return this.options.pixels/Math.PI*Math.pow(2,this.options.zoom)*(t*Math.PI/ 180+Math.PI)}}],[{key:"geoJSON",value:function(){return(0,a.default)(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}}]),t}();e.default=s},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(3),u=n(s),l=o(13),p=n(l),c=function(){function t(e){i(this,t),this.options=e,this.mappaDiv=null,this.id=(0,p.default)(),this.srcLoaded=!1}return a(t,[{key:"loadSrc",value:function(){var t=this;new Promise(function(e,o){if(t.scriptTag=document.createElement("script"),document.body.appendChild(t.scriptTag),t.scriptTag.id=t.options.provider,t.scriptTag.onload=e,t.scriptTag.onerror=o,t.scriptTag.async=!0,t.scriptTag.src=t.scriptSrc,t.styleSrc){var n=document.createElement("link");document.head.appendChild(n),n.rel="stylesheet",n.href=t.styleSrc}}).then(function(){t.srcLoaded=!0})}},{key:"overlay",value:function(t,e){var o=this;void 0!==t.elt?this.canvas=t.elt:this.canvas=t,this.scriptTag.onload=function(){o.mappaDiv=document.createElement("div"),o.canvas.parentElement?o.canvas.parentElement.appendChild(o.mappaDiv):document.body.appendChild(o.mappaDiv),o.mappaDiv.setAttribute("style","width:"+t.width+"px;height:"+t.height+"px;"),o.mappaDiv.setAttribute("id",o.id),o.createMap(),"function"==typeof e&&e()}}},{key:"latLngToPixel",value:function(){for(var t=void 0,e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];return t="object"===r(o[0])?o[0]:{lat:Number(o[0]),lng:Number(o[1])},this.fromLatLngToPixel(t)}},{key:"pixelToLatLng",value:function(){return this.fromPointToLatLng.apply(this,arguments)}},{key:"zoom",value:function(){return Math.floor(this.getZoom())}},{key:"geoJSON",value:function(){return(0,u.default)(arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}}]),t}();e.default=c},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(1),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(t){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.scriptSrc="https://unpkg.com/leaflet@1.3.0/dist/leaflet.js",o.styleSrc="https://unpkg.com/leaflet@1.3.0/dist/leaflet.css",o.ready=!1,"Leaflet"===o.constructor.name&&o.loadSrc(),o}return r(e,t),a(e,[{key:"createMap",value:function(){var t=this;this.map=L.map(this.id,{center:[this.options.lat,this.options.lng],zoom:this.options.zoom,inertia:!1}),this.options.style?(this.tiles=L.tileLayer(this.options.style).addTo(this.map),this.tiles.on("tileload",function(){t.ready=!0})):(e.messages().tiles(),this.ready=!0),this.canvasOverlay()}},{key:"canvasOverlay",value:function(){var t=this;this.tiles&&(this.tiles.options.opacity=this.options.opacity),L.overlay=L.Layer.extend({onAdd:function(){var o=e.getPane(),n=L.DomUtil.create("div","leaflet-layer");n.appendChild(t.canvas),o.appendChild(n)},drawLayer:function(){}});var e=new L.overlay;this.map.addLayer(e);var o=this.canvas.getContext("webgl")||this.canvas.getContext("2d");this.map.on("move",function(){var e=t.map.dragging._draggable;e._newPos&&(o.canvas.style.transform="translate("+-e._newPos.x+"px, "+-e._newPos.y+"px)")})}},{key:"fromLatLngToPixel",value:function(t){if(this.ready){var e=this.map.latLngToContainerPoint(t);return{x:e.x,y:e.y}}return{x:-100,y:-100}}},{key:"fromPointToLatLng",value:function(){if(this.ready){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return this.map.containerPointToLatLng(e)}return{lat:-100,lng:-100}}},{key:"getZoom",value:function(){return this.ready?this.map.getZoom():0}},{key:"onChange",value:function(t){var e=this;this.ready?(t(),this.map.on("move",t)):setTimeout(function(){e.onChange(t)},200)}},{key:"removeOnChange",value:function(t){this.map.on("move",t)}}],[{key:"messages",value:function(){return{tiles:function(){console.warn("You are not using any tiles for your map. Try with: http://{s}.tile.osm.org/{z}/{x}/{y}.png")}}}}]),e}(u.default);e.default=l},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e){return t.hasOwnProperty("geometry")&&t.geometry.type===e?t.geometry.coordinates:t.hasOwnProperty("geometries")&&t.geometries instanceof Array&&t.geometry.type===e?void t.geometries.forEach(function(e){return t.geometry.coordinates}):t.hasOwnProperty("coordinates")&&t.geometry.type===e?t.geometry.coordinates:null},i=function(t,e){var o=[];return"FeatureCollection"===t.type?t.features instanceof Array&&t.features.forEach(function(t){var i=n(t,e);void 0!=i&&o.push(i)}):o=n(t,e),o};e.default=i},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.StaticMap=e.Mapquest=e.Google=e.Mapbox=void 0;var i=o(8),r=n(i),a=o(7),s=n(a),u=o(9),l=n(u),p=o(0),c=n(p);e.Mapbox=r.default,e.Google=s.default,e.Mapquest=l.default,e.StaticMap=c.default},function(t,e,o){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0}),e.Mapbox=e.Leaflet=e.Google=e.MapboxGL=void 0;var i=o(12),r=n(i),a=o(10),s=n(a),u=o(2),l=n(u),p=o(11),c=n(p);e.MapboxGL=r.default,e.Google=s.default,e.Leaflet=l.default,e.Mapbox=c.default},function(t,e,o){"use strict";function n(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(5),u=n(s),l=o(4),p=n(l),c=function(){function t(e,o){i(this,t),this.provider=e,this.key=o}return a(t,[{key:"staticMap",value:function(){for(var t={},e=arguments.length,o=Array(e),n=0;n<e;n++)o[n]=arguments[n];if("object"===r(o[0]))t=Object.assign({},o[0]);else{var i=p[this.provider].options().userInput;o.forEach(function(e,o){var n=i[o];t[n]=e})}return t.key=this.key,void 0===this.provider&&(this.provider="StaticMap"),new p[this.provider](t)}},{key:"tileMap",value:function(){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];var n={};return"object"===r(e[0])?n=Object.assign({},e[0]):["lat","lng","zoom"].forEach(function(t,o){n[t]=e[o]}),n.key=this.key,n.provider=this.provider,new u[this.provider](n)}}]),t}();console.log("Mappa loaded!"),t.exports=c},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(0),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(t){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.imgUrl="https://maps.googleapis.com/maps/api/staticmap?",o.createImage(),o}return r(e,t),a(e,[{key:"init",value:function(){1===this.options.scale||void 0===this.options.scale?(this.options.pixels=128,this.options.scale=1):2===this.options.scale&&(this.options.pixels=256),this.options.width>640&&(e.messages().size("width",this.options.width),this.options.width=640),this.options.height>640&&(e.messages().size("height",this.options.height),this.options.height=640)}},{key:"createImage",value:function(){var t=this;return this.options.key||(delete this.options.key,e.messages().key()),this.options.center||(this.options.center=this.options.lat+","+this.options.lng),this.options.scale||(this.options.scale=1),this.options.size=this.options.width+"x"+this.options.height,Object.keys(this.options).forEach(function(o){e.options().valid.indexOf(o)>-1&&(t.imgUrl+="&"+o+"="+t.options[o])}),this.imgUrl}}],[{key:"options",value:function(){return{valid:["center","zoom","size","scale","format","maptype","language","region","markers","path","visible","style","signature","key","signature"],userInput:["lat","lng","zoom","width","height","scale","format","maptype","language","region","markers","path","visible","style","key","signature","center"]}}},{key:"messages",value:function(){return{size:function(t,e){console.warn("You requested an image with a "+t+" of "+e+"px. Google Maps Static API max "+t+" value is 640px. For larger images, change the scale to 2 and keep the "+t+" between 1-640px. i.e: if you want an image 800x800px, set the width and height to 400x400 and the scale to 2.")},key:function(){console.warn("For better results please provide an API key for your Google Maps Static API.")}}}}]),e}(u.default);e.default=l},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(0),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(t){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.imgUrl="https://api.mapbox.com/styles/v1/",o.createImage(),o}return r(e,t),a(e,[{key:"init",value:function(){this.options.pixels=256,this.options.scale||(this.options.scale=1),2===this.options.scale?this.options.pixels=512:(this.options.width>1280&&(e.messages().size("width",this.options.width),this.options.width=1280),this.options.height>1280&&(e.messages().size("height",this.options.width),this.options.height=1280))}},{key:"createImage",value:function(){var t=this;return this.options.key?(void 0!==this.options.username?this.imgUrl+=this.options.username+"/":this.imgUrl+="mapbox/",void 0!==this.options.style?this.imgUrl+=this.options.style+"/":this.imgUrl+="streets-v10/",this.imgUrl+="static/",void 0!==this.options.overlay&&(this.imgUrl+=this.options.overlay+"/"),this.imgUrl+=this.options.lng+","+this.options.lat+",",!1===this.options.auto||void 0===this.options.auto?["zoom","bearing","pitch"].forEach(function(e,o){void 0!==t.options[e]?t.imgUrl+=t.options[e]:t.imgUrl+=0,o<2&&(t.imgUrl+=",")}):this.imgUrl+="auto",this.imgUrl+="/"+this.options.width+"x"+this.options.height,2===this.options.scale&&(this.imgUrl+="@2x"),this.imgUrl+="?access_token="+this.options.key,this.options.attribution?this.imgUrl+="&attribution="+this.options.attribution:this.imgUrl+="&attribution=false",this.options.logo?this.imgUrl+="&logo="+this.options.logo:this.imgUrl+="&logo=false",this.options.before_layer?this.imgUrl+="&before_layer="+this.options.before_layer:this.imgUrl+="&before_layer=false",this.imgUrl):(e.messages().key(),null)}}],[{key:"options",value:function(){return{valid:["lat","lng","zoom","width","height","scale","bearing","pitch","style","username","overlay","attribution","logo","before_layer","center","size"],userInput:["lat","lng","zoom","width","height","scale","bearing","pitch","style","username","overlay","attribution","logo","before_layer","center","size"]}}},{key:"messages",value:function(){return{size:function(t,e){return console.warn("You requested an image with a "+t+" of "+e+"px. Mapbox Static API max "+t+" value is 1280px. If you want a large image change the scale to 2.")},key:function(){console.error("Mapbox Static API needs a key to work. To get a key visit: https://www.mapbox.com/api-documentation/#static")}}}}]),e}(u.default);e.default=l},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(0),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(t){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.imgUrl="https://www.mapquestapi.com/staticmap/v5/map?",o.createImage(),o}return r(e,t),a(e,[{key:"init",value:function(){1===this.options.scale||void 0===this.options.scale?(this.options.pixels=128,this.options.scale=1):2===this.options.scale&&(this.options.pixels=256),this.options.width>1920&&(e.messages().size("width",this.options.width),this.options.width=1920),this.options.height>1920&&(e.messages().size("height",this.options.height),this.options.height=1920)}},{key:"createImage",value:function(){var t=this;return this.options.key?(this.options.size=this.options.width+","+this.options.height,2===this.options.scale&&(this.options.size+="@2x"),this.options.center||(this.options.center=this.options.lat+","+this.options.lng),Object.keys(this.options).forEach(function(o){e.options().valid.indexOf(o)>-1&&(t.imgUrl+="&"+o+"="+t.options[o])}),this.imgUrl):(e.messages().key(),null)}}],[{key:"options",value:function(){return{valid:["key","size","zoom","center","boundingBox","margin","format","type","scalebar","locations","declutter","defaultMarker","banner","traffic","key"],userInput:["lat","lng","zoom","width","height","scale","boundingBox","margin","format","type","scalebar","locations","declutter","defaultMarker","banner","traffic","key"]}}},{key:"messages",value:function(){return{size:function(t,e){console.warn("You requested an image with a "+t+" of "+e+"px. Mapquest Static API max "+t+" value is 1920px. For larger images, change the scale to 2 and keep the "+t+" between 170x30px. i.e: if you want an 3840x3840px image, set the width and height to 1920x1920 and the scale to 2.")},key:function(){console.warn("Please provide and API key to work with Mapquest Static API. Get one here: https://developer.mapquest.com/documentation/")}}}}]),e}(u.default);e.default=l},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(1),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(t){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.scriptSrc="https://maps.googleapis.com/maps/api/js?v=3",o.options.key&&(o.scriptSrc+="&key="+o.options.key),o.options.language&&(o.scriptSrc+="&language="+o.options.language),o.options.region&&(o.scriptSrc+="&region="+o.options.region),o.onChangeMethods={},o.loadSrc(),o}return r(e,t),a(e,[{key:"createMap",value:function(){var t=this;this.options.key||e.messages().key(),this.map=new google.maps.Map(document.getElementById(this.id),{center:{lat:this.options.lat,lng:this.options.lng},zoom:this.options.zoom||6,mapTypeId:this.options.maptype||"terrain",styles:this.options.styles||"",minZoom:1});var o=new google.maps.OverlayView;o.onAdd=function(){o.getPanes().overlayLayer.appendChild(t.canvas)},o.draw=function(){},o.setMap(this.map),google.maps.event.addListener(this.map,"bounds_changed",function(){var e=o.getProjection().fromLatLngToDivPixel(t.map.getCenter()),n=2;window.devicePixelRatio>=2&&(n=4);var i=-Math.round(t.canvas.width/n-e.x),r=-Math.round(t.canvas.height/n-e.y);(t.canvas.getContext("webgl")||t.canvas.getContext("2d")).canvas.style.transform="translate("+i+"px,"+r+"px)"}),google.maps.event.addListenerOnce(this.map,"tilesloaded",function(){t.ready=!0})}},{key:"fromLatLngToPixel",value:function(t){if(this.ready){var e=new google.maps.LatLng(t),o=this.map.getProjection().fromLatLngToPoint(this.map.getBounds().getNorthEast()),n=this.map.getProjection().fromLatLngToPoint(this.map.getBounds().getSouthWest()),i=Math.pow(2,this.map.getZoom()),r=this.map.getProjection().fromLatLngToPoint(e);return new google.maps.Point((r.x-n.x)*i,(r.y-o.y)*i)}return{x:-100,y:-100}}},{key:"fromPointToLatLng",value:function(){if(this.ready){var t=this.map.getProjection().fromLatLngToPoint(this.map.getBounds().getNorthEast()),e=this.map.getProjection().fromLatLngToPoint(this.map.getBounds().getSouthWest()),o=Math.pow(2,this.map.getZoom()),n=new google.maps.Point((arguments.length<=0?void 0:arguments[0])/o+e.x,(arguments.length<=1?void 0:arguments[1])/o+t.y),i=this.map.getProjection().fromPointToLatLng(n);return{lat:i.lat(),lng:i.lng()}}return{lat:-100,lng:-100}}},{key:"getZoom",value:function(){return this.ready?this.map.getZoom():0}},{key:"onChange",value:function(t){var e=this;this.ready?(t(),this.onChangeMethods[t]=google.maps.event.addListener(this.map,"bounds_changed",t)):setTimeout(function(){e.onChange(t)},200)}},{key:"removeOnChange",value:function(t){google.maps.event.removeListener(this.onChangeMethods[t])}}],[{key:"messages",value:function(){return{key:function(){console.warn("Please provide a Goolge Maps API Key. Get one here: https://developers.google.com/maps/documentation/javascript/ ")}}}}]),e}(u.default);e.default=l},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(2),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(t){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.scriptSrc="https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.js",o.styleSrc="https://api.mapbox.com/mapbox.js/v3.1.1/mapbox.css",o.loadSrc(),o}return r(e,t),a(e,[{key:"createMap",value:function(){var t=this;this.options.key?L.mapbox.accessToken=this.options.key:e.messages().key(),this.map=L.mapbox.map(this.id).setView([this.options.lat,this.options.lng],this.options.zoom),this.options.studio?this.tiles=L.mapbox.styleLayer(this.options.style||"mapbox://styles/mapbox/emerald-v8").addTo(this.map):this.tiles=L.mapbox.tileLayer(this.options.style||"mapbox.streets").addTo(this.map),this.tiles.on("ready",function(){t.ready=!0}),this.canvasOverlay()}}],[{key:"messages",value:function(){return{key:function(){console.warn("Please provide a Mapbox API key. Get one here: https://www.mapbox.com/mapbox.js/api/v3.1.1")}}}}]),e}(u.default);e.default=l},function(t,e,o){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var o=0;o<e.length;o++){var n=e[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e}}(),s=o(1),u=function(t){return t&&t.__esModule?t:{default:t}}(s),l=function(t){function e(t){n(this,e);var o=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return o.scriptSrc="https://api.mapbox.com/mapbox-gl-js/v0.43.0/mapbox-gl.js",o.styleSrc="https://api.mapbox.com/mapbox-gl-js/v0.43.0/mapbox-gl.css",o.ready=!1,o.options.key?o.loadSrc():e.messages().key(),o}return r(e,t),a(e,[{key:"createMap",value:function(){var t=this;mapboxgl.accessToken=this.options.key,this.map=new mapboxgl.Map({container:this.id,style:this.options.style||"mapbox://styles/mapbox/satellite-streets-v10",center:[this.options.lng,this.options.lat],zoom:this.options.zoom,minZoom:this.options.minZoom||0,maxZoom:this.options.maxZoom||22,bearing:this.options.bearing||0,pitch:this.options.pitch||0,renderWorldCopies:this.options.renderWorldCopies,maxBounds:this.options.maxBounds||void 0}),this.map.getCanvasContainer().appendChild(this.canvas),this.canvas.style.position="relative",this.options.opacity&&(document.getElementsByClassName("mapboxgl-canvas")[0].style.opacity=this.options.opacity),this.map.on("load",function(){t.ready=!0})}},{key:"fromLatLngToPixel",value:function(t){return this.ready?this.map.project(t):{x:-100,y:-100}}},{key:"fromPointToLatLng",value:function(){if(this.ready){for(var t=arguments.length,e=Array(t),o=0;o<t;o++)e[o]=arguments[o];return this.map.unproject(e)}return{lat:-100,lng:-100}}},{key:"getZoom",value:function(){return this.ready?this.map.getZoom():0}},{key:"onChange",value:function(t){var e=this;this.ready?(t(),this.map.on("render",t)):setTimeout(function(){e.onChange(t)},200)}},{key:"removeOnChange",value:function(t){this.map.off("render",t)}}],[{key:"messages",value:function(){return{key:function(){console.warn("Please provide a Mapbox-gl API key. Get one here: https://www.mapbox.com/mapbox-gl-js/api/")}}}}]),e}(u.default);e.default=l},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},i=function(){return""+n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()};e.default=i}])});
